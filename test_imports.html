<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Test Imports</title>
    <script type="importmap">
        {
          "imports": {
            "matter-js": "https://esm.sh/matter-js@0.19.0",
            "@mediapipe/tasks-vision": "https://esm.sh/@mediapipe/tasks-vision@0.10.8"
          }
        }
    </script>
</head>

<body>
    <h1>Import Test</h1>
    <div id="log"></div>
    <script type="module">
        function log(msg) {
            document.getElementById('log').innerText += msg + '\n';
        }

        async function test() {
            try {
                log("Starting imports...");

                log("Importing matter-js...");
                const MatterModule = await import('matter-js');
                log("matter-js imported.");
                log("Keys: " + Object.keys(MatterModule));
                log("Engine available? " + !!MatterModule.Engine);
                if (!MatterModule.Engine && MatterModule.default) {
                    log("Checking default export...");
                    log("Default.Engine available? " + !!MatterModule.default.Engine);
                }

                log("Importing tasks-vision...");
                const VisionModule = await import('@mediapipe/tasks-vision');
                log("tasks-vision imported.");
                log("FilesetResolver available? " + !!VisionModule.FilesetResolver);

            } catch (e) {
                log("ERROR: " + e.message);
                console.error(e);
            }
        }
        test();
    </script>
</body>

</html>